-- MySQL Script generated by MySQL Workbench
-- Thu Mar 23 14:33:15 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `mydb` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Student`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Student` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Student` (
  `idStudent` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `surname` VARCHAR(45) NOT NULL,
  `email` VARCHAR(64) NOT NULL,
  `birthDate` DATE NOT NULL,
  `pkk` VARCHAR(20) NOT NULL,
  `password` VARCHAR(64) NOT NULL,
  PRIMARY KEY (`idStudent`),
  UNIQUE INDEX `idKursant_UNIQUE` (`idStudent` ASC) VISIBLE,
  UNIQUE INDEX `pkk_UNIQUE` (`pkk` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `mydb`.`Vehicle`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Vehicle` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Vehicle` (
  `idVehicle` INT NOT NULL AUTO_INCREMENT,
  `brand` VARCHAR(45) NOT NULL,
  `model` VARCHAR(45) NOT NULL,
  `nrRejestracyjny` VARCHAR(8) NOT NULL,
  `type` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idVehicle`),
  UNIQUE INDEX `idPojazd_UNIQUE` (`idVehicle` ASC) VISIBLE,
  UNIQUE INDEX `nrRejestracyjny_UNIQUE` (`nrRejestracyjny` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Teacher`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Teacher` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Teacher` (
  `idTeacher` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `nazwisko` VARCHAR(45) NOT NULL,
  `birthDate` DATE NOT NULL,
  `phoneNumber` INT NOT NULL,
  `email` VARCHAR(64) NOT NULL,
  `password` VARCHAR(64) NOT NULL,
  PRIMARY KEY (`idTeacher`),
  UNIQUE INDEX `idInstruktor_UNIQUE` (`idTeacher` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Drive`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Drive` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Drive` (
  `idDrive` INT NOT NULL AUTO_INCREMENT,
  `dateTime` DATETIME NULL,
  `idVehicle` INT NOT NULL,
  `idInstruktor` INT NOT NULL,
  `idStudent` INT NOT NULL,
  PRIMARY KEY (`idDrive`, `idVehicle`, `idInstruktor`),
  UNIQUE INDEX `idJazdy_UNIQUE` (`idDrive` ASC) VISIBLE,
  INDEX `fk_Jazdy_Pojazd_idx` (`idVehicle` ASC) VISIBLE,
  INDEX `fk_Jazdy_Instruktor1_idx` (`idInstruktor` ASC) VISIBLE,
  INDEX `fk_Jazdy_Kursant1_idx` (`idStudent` ASC) VISIBLE,
  CONSTRAINT `fk_Jazdy_Pojazd`
    FOREIGN KEY (`idVehicle`)
    REFERENCES `mydb`.`Vehicle` (`idVehicle`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Jazdy_Instruktor1`
    FOREIGN KEY (`idInstruktor`)
    REFERENCES `mydb`.`Teacher` (`idTeacher`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Jazdy_Kursant1`
    FOREIGN KEY (`idStudent`)
    REFERENCES `mydb`.`Student` (`idStudent`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Opinions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Opinions` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Opinions` (
  `idOpinion` INT NOT NULL AUTO_INCREMENT,
  `score` INT NOT NULL,
  `opinionText` VARCHAR(128) NULL,
  `idStudent` INT NOT NULL,
  PRIMARY KEY (`idOpinion`, `idStudent`),
  UNIQUE INDEX `idOpinie_UNIQUE` (`idOpinion` ASC) VISIBLE,
  INDEX `fk_Opinie_Kursant1_idx` (`idStudent` ASC) VISIBLE,
  CONSTRAINT `fk_Opinie_Kursant1`
    FOREIGN KEY (`idStudent`)
    REFERENCES `mydb`.`Student` (`idStudent`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`TeachingMaterials`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`TeachingMaterials` ;

CREATE TABLE IF NOT EXISTS `mydb`.`TeachingMaterials` (
  `idTeachingMaterials` INT NOT NULL AUTO_INCREMENT,
  `file` VARCHAR(45) NULL,
  `name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idTeachingMaterials`),
  UNIQUE INDEX `idMaterialyDydaktyczne_UNIQUE` (`idTeachingMaterials` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CourseRecords`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`CourseRecords` ;

CREATE TABLE IF NOT EXISTS `mydb`.`CourseRecords` (
  `idCourseRecords` INT NOT NULL AUTO_INCREMENT,
  `category` VARCHAR(2) NOT NULL,
  `price` FLOAT NOT NULL,
  PRIMARY KEY (`idCourseRecords`),
  UNIQUE INDEX `idEwidencjaKursow_UNIQUE` (`idCourseRecords` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`QuestionsDatabase`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`QuestionsDatabase` ;

CREATE TABLE IF NOT EXISTS `mydb`.`QuestionsDatabase` (
  `idQuestion` INT NOT NULL AUTO_INCREMENT,
  `questionText` VARCHAR(256) NOT NULL,
  `answer1` VARCHAR(256) NOT NULL,
  `naswer2` VARCHAR(256) NULL,
  `answer3` VARCHAR(256) NULL,
  `correctAnswer` VARCHAR(256) NOT NULL,
  `questionScore` INT NOT NULL,
  PRIMARY KEY (`idQuestion`),
  UNIQUE INDEX `idPytania_UNIQUE` (`idQuestion` ASC) VISIBLE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `mydb`.`TestScore`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`TestScore` ;

CREATE TABLE IF NOT EXISTS `mydb`.`TestScore` (
  `idTestScore` INT NOT NULL AUTO_INCREMENT,
  `score` INT NULL,
  `idStudent` INT NOT NULL,
  PRIMARY KEY (`idTestScore`, `idStudent`),
  UNIQUE INDEX `idWynikiTest_UNIQUE` (`idTestScore` ASC) VISIBLE,
  INDEX `fk_WynikiTest_Kursant1_idx` (`idStudent` ASC) VISIBLE,
  CONSTRAINT `fk_WynikiTest_Kursant1`
    FOREIGN KEY (`idStudent`)
    REFERENCES `mydb`.`Student` (`idStudent`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `mydb`.`EnrolledStudent`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`EnrolledStudent` ;

CREATE TABLE IF NOT EXISTS `mydb`.`EnrolledStudent` (
  `idCourseRecords` INT NOT NULL,
  `idStudent` INT NOT NULL,
  PRIMARY KEY (`idCourseRecords`, `idStudent`),
  INDEX `fk_EwidencjaKursow_has_Kursant_Kursant1_idx` (`idStudent` ASC) VISIBLE,
  INDEX `fk_EwidencjaKursow_has_Kursant_EwidencjaKursow1_idx` (`idCourseRecords` ASC) VISIBLE,
  CONSTRAINT `fk_EwidencjaKursow_has_Kursant_EwidencjaKursow1`
    FOREIGN KEY (`idCourseRecords`)
    REFERENCES `mydb`.`CourseRecords` (`idCourseRecords`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EwidencjaKursow_has_Kursant_Kursant1`
    FOREIGN KEY (`idStudent`)
    REFERENCES `mydb`.`Student` (`idStudent`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`TeacherPermissons`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`TeacherPermissons` ;

CREATE TABLE IF NOT EXISTS `mydb`.`TeacherPermissons` (
  `idCourseRecords` INT NOT NULL,
  `idTeacher` INT NOT NULL,
  PRIMARY KEY (`idCourseRecords`, `idTeacher`),
  INDEX `fk_EwidencjaKursow_has_Instruktor_Instruktor1_idx` (`idTeacher` ASC) VISIBLE,
  INDEX `fk_EwidencjaKursow_has_Instruktor_EwidencjaKursow1_idx` (`idCourseRecords` ASC) VISIBLE,
  CONSTRAINT `fk_EwidencjaKursow_has_Instruktor_EwidencjaKursow1`
    FOREIGN KEY (`idCourseRecords`)
    REFERENCES `mydb`.`CourseRecords` (`idCourseRecords`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EwidencjaKursow_has_Instruktor_Instruktor1`
    FOREIGN KEY (`idTeacher`)
    REFERENCES `mydb`.`Teacher` (`idTeacher`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`AssignedMaterials`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`AssignedMaterials` ;

CREATE TABLE IF NOT EXISTS `mydb`.`AssignedMaterials` (
  `idTeachingMaterials` INT NOT NULL,
  `idCourseRecords` INT NOT NULL,
  PRIMARY KEY (`idTeachingMaterials`, `idCourseRecords`),
  INDEX `fk_MaterialyDydaktyczne_has_EwidencjaKursow_EwidencjaKursow_idx` (`idCourseRecords` ASC) VISIBLE,
  INDEX `fk_MaterialyDydaktyczne_has_EwidencjaKursow_MaterialyDydakt_idx` (`idTeachingMaterials` ASC) VISIBLE,
  CONSTRAINT `fk_MaterialyDydaktyczne_has_EwidencjaKursow_MaterialyDydaktyc1`
    FOREIGN KEY (`idTeachingMaterials`)
    REFERENCES `mydb`.`TeachingMaterials` (`idTeachingMaterials`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MaterialyDydaktyczne_has_EwidencjaKursow_EwidencjaKursow1`
    FOREIGN KEY (`idCourseRecords`)
    REFERENCES `mydb`.`CourseRecords` (`idCourseRecords`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
